<html>
    <head>
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
        <script src="../webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../paper-button/paper-button.html">
        <link rel="import" href="paper-fullscreen-save-dialog.html">
    </head>
    <body unresolved>
  <template is="dom-bind" id="scope">
      <paper-button on-tap="open">Open dialog</paper-button>
        <paper-fullscreen-save-dialog id="dialog" confirm-button="Done">
            <span class="title">Hello world</span>
            <p>Hello world</p>
        </paper-fullscreen-save-dialog>
  </template>
  <script>
    var $ = document.querySelector.bind(document);
    var scope=$('#scope');
    console.log(scope);
    scope.open = function() {
        document.querySelector('#dialog').removeEventListener('save', save);
        document.querySelector('#dialog').addEventListener('save', save);
        document.querySelector('#dialog').open();
    };
    
    function save() {
        setTimeout(()=>{
            document.querySelector('#dialog').setAttribute('save-completed', true);
        }, 1500);
    }
  </script>

</body>
</html>